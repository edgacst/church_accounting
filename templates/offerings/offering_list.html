{% extends 'base.html' %}
{% load humanize %}

{% block title %}헌금 관리{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2><i class="bi bi-cash-stack"></i> 헌금 관리</h2>
    <div class="mb-3 text-end">
        <a href="?show=all" class="btn btn-outline-secondary btn-sm">전체 보기</a>
        <a href="?show=unconfirmed" class="btn btn-outline-warning btn-sm">미확인만</a>
    </div>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead class="table-light">
                <tr>
                    <th>헌금일자</th>
                    <th>교인명</th>
                    <th>헌금유형</th>
                    <th class="text-end">금액</th>
                    <th>결제방법</th>
                    <th>확인여부</th>
                    <th>비고</th>
                </tr>
            </thead>
            <tbody>
                {% for offering in offerings %}
                <tr>
                    <td>{{ offering.offering_date }}</td>
                    <td>{{ offering.member.korean_name }}</td>
                    <td>{{ offering.offering_type.name }}</td>
                    <td class="text-end">{{ offering.amount|intcomma }}원</td>
                    <td>{{ offering.get_payment_method_display }}</td>
                    <td>
                        {% if offering.is_confirmed %}
                            <span class="badge bg-success">확인</span>
                        {% else %}
                            <span class="badge bg-warning text-dark">미확인</span>
                        {% endif %}
                    </td>
                    <td>{{ offering.notes|default:"-" }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="7" class="text-center">등록된 헌금 내역이 없습니다.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
